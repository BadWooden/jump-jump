(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-53b7e260"],{"0815":function(e,t,r){},9472:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-main",[r("el-drawer",{ref:"createFormDrawer",attrs:{visible:e.createFormDrawer,direction:"rtl","before-close":e.handleCreateFormDrawerClose},on:{"update:visible":function(t){e.createFormDrawer=t}}},[r("div",{staticStyle:{width:"90%","margin-left":"15px"}},[r("h2",{staticStyle:{"margin-top":"0",color:"#606266"}},[e._v("添加短链接")]),e._v(" "),r("el-form",{ref:"createForm",attrs:{model:e.createForm,rules:e.createFormRules}},[r("el-form-item",{attrs:{label:"目标链接",prop:"url"}},[r("el-input",{model:{value:e.createForm.url,callback:function(t){e.$set(e.createForm,"url",t)},expression:"createForm.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.createForm.description,callback:function(t){e.$set(e.createForm,"description",t)},expression:"createForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"启用？",prop:"is_enable"}},[r("el-switch",{model:{value:e.createForm.is_enable,callback:function(t){e.$set(e.createForm,"is_enable",t)},expression:"createForm.is_enable"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onCreateFormSubmit}},[e._v("添加")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:e.onCreateFormCancel}},[e._v("取消")])],1)],1)],1)]),e._v(" "),r("el-drawer",{ref:"editFormDrawer",attrs:{visible:e.editFormDrawer,direction:"rtl","before-close":e.handleEditFormDrawerClose},on:{"update:visible":function(t){e.editFormDrawer=t}}},[r("div",{staticStyle:{width:"90%","margin-left":"15px"}},[r("h2",{staticStyle:{"margin-top":"0",color:"#606266"}},[e._v("更新："+e._s(e.editForm.id))]),e._v(" "),r("el-form",{ref:"editForm",attrs:{model:e.editForm,rules:e.editFormRules}},[r("el-form-item",{attrs:{label:"目标链接",prop:"url"}},[r("el-input",{model:{value:e.editForm.url,callback:function(t){e.$set(e.editForm,"url",t)},expression:"editForm.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"description"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.editForm.description,callback:function(t){e.$set(e.editForm,"description",t)},expression:"editForm.description"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"启用？",prop:"is_enable"}},[r("el-switch",{model:{value:e.editForm.is_enable,callback:function(t){e.$set(e.editForm,"is_enable",t)},expression:"editForm.is_enable"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"创建人"}},[r("span",{staticStyle:{color:"#909399"}},[e._v(e._s(e.editForm.created_by))])]),e._v(" "),r("el-form-item",{attrs:{label:"添加时间"}},[r("span",{staticStyle:{color:"#909399"}},[e._v(e._s(e._f("dateformat")(e.editForm.create_time)))])]),e._v(" "),r("el-form-item",{attrs:{label:"更新时间"}},[r("span",{staticStyle:{color:"#909399"}},[e._v(e._s(e._f("dateformat")(e.editForm.update_time)))])]),e._v(" "),r("el-form-item",[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onEditFormSubmit}},[e._v("更新")]),e._v(" "),r("el-button",{attrs:{size:"mini"},on:{click:e.onEditFormCancel}},[e._v("取消")])],1)],1)],1)]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-refresh",size:"mini"},on:{click:function(t){return e.getList(1)}}},[e._v("刷新")]),e._v(" "),r("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.createFormDrawer=!0}}},[e._v("添加\n  ")]),e._v(" "),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,"max-height":"800"}},[r("el-table-column",{attrs:{prop:"id",label:"ID",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{prop:"url",label:"目标链接",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{attrs:{type:"info",href:t.row.url,target:"_blank"}},[e._v(e._s(t.row.url))])]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"描述",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.description?t.row.description:"-")+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"启用？",width:"70",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[r("i",{class:{"el-icon-check":e.row.is_enable,"el-icon-close":!e.row.is_enable}})]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"创建人",width:"150",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.created_by)+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"添加时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateformat")(t.row.create_time))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"更新时间",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e._f("dateformat")(t.row.update_time))+"\n      ")]}}])}),e._v(" "),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",circle:"",icon:"el-icon-edit-outline"},on:{click:function(r){return e.toEdit(t.row.id)}}}),e._v(" "),r("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete-solid",circle:""},on:{click:function(r){return e.deleteShortLink(t.row.id)}}})]}}])})],1),e._v(" "),r("div",{staticClass:"paginator-container"},[r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total,"hide-on-single-page":"true"},on:{"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)],1)},o=[],n=r("b775");function a(e){return Object(n["a"])({url:"/v1/short-link/".concat(e),method:"get"})}function l(e,t){return Object(n["a"])({url:"/v1/short-link/?page=".concat(e,"&pageSize=").concat(t),method:"get"})}function s(e){return Object(n["a"])({url:"/v1/short-link/",method:"post",data:e})}function c(e){return Object(n["a"])({url:"/v1/short-link/".concat(e),method:"delete"})}function u(e,t){return Object(n["a"])({url:"/v1/short-link/".concat(e),method:"patch",data:t})}var m=r("61f7"),d={name:"ShortLinkList",data:function(){var e=function(e,t,r){if(""===t)r(new Error("请输入目标链接"));else{if(!Object(m["b"])(t))return void r(new Error("这不是一个合法的目标链接"));r()}};return{list:[],total:0,currentPage:1,pageSize:20,createFormDrawer:!1,createForm:{url:"",description:"",is_enable:!1},createFormRules:{url:[{validator:e,trigger:"blur"}]},editFormDrawer:!1,editForm:{id:"",url:"",description:"",is_enable:!1,created_by:"",create_time:"",update_time:""},editFormRules:{url:[{validator:e,trigger:"blur"}]}}},created:function(){this.getList(this.currentPage)},methods:{getList:function(e){var t=this;l(e,this.pageSize).then((function(e){t.total=e.data.total,t.list=e.data.shortLinks,1!==t.currentPage&&0===t.list.length&&t.total>0&&(t.currentPage=1,t.getList(1))}))},resetCreateForm:function(){this.createForm.url="",this.createForm.description="",this.createForm.is_enable=!1},resetEditForm:function(){this.editForm.url="",this.editForm.description="",this.editForm.is_enable=!1,this.editForm.created_by="",this.editForm.create_time="",this.editForm.update_time=""},handlePageSizeChange:function(e){this.pageSize=e,this.currentPage=1,this.getList(1)},handleCurrentPageChange:function(e){this.currentPage=e,this.getList(e)},handleCreateFormDrawerClose:function(e){this.resetCreateForm(),e()},onCreateFormSubmit:function(){var e=this;this.$refs.createForm.validate((function(t){if(!t)return!1;s(e.createForm).then((function(t){e.$refs.createFormDrawer.closeDrawer(),e.$notify({title:"添加短链接成功",message:"ID："+t.data.shortLink.id,type:"success"}),e.getList(e.currentPage)}))}))},onCreateFormCancel:function(){this.resetCreateForm(),this.createFormDrawer=!1},toEdit:function(e){var t=this;a(e).then((function(e){t.editFormDrawer=!0,t.editForm=e.data.shortLink}))},handleEditFormDrawerClose:function(e){this.resetEditForm(),e()},onEditFormSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){if(!t)return!1;u(e.editForm.id,e.editForm).then((function(t){e.$refs.editFormDrawer.closeDrawer(),e.$notify({title:"更新成功",message:"ID："+t.data.shortLink.id,type:"success"}),e.getList(e.currentPage)}))}))},onEditFormCancel:function(){this.resetEditForm(),this.editFormDrawer=!1},deleteShortLink:function(e){var t=this;this.$confirm("此操作会永久删除短链接，是否继续？","删除确认",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c(e).then((function(r){t.$notify({title:"成功删除短链接",message:"ID：".concat(e),type:"success"}),t.getList(t.currentPage)}))}))}}},f=d,p=(r("98ee"),r("2877")),h=Object(p["a"])(f,i,o,!1,null,"0eca0e5f",null);t["default"]=h.exports},"98ee":function(e,t,r){"use strict";var i=r("0815"),o=r.n(i);o.a}}]);